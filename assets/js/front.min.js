jQuery(function(t){function e(e,a){t("body").addClass("wf-alert-container"),t(".wf-alert-container").prepend('\t\t\t\t\t\t\t\t\t<div id="wf-alert-overlay">\t\t\t\t\t\t\t\t\t\t<div id="wf-alert-popup" class="'+a+'">\t\t\t\t\t\t\t\t\t\t\t<span class="wf-alert-dismiss">&times;</span>\t\t\t\t\t\t\t\t\t\t\t<div class="wf-alert-content"></div>\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t'),t(".wf-alert-content","#wf-alert-popup").text(e),t("#wf-alert-popup").show()}t(".datepicker").datepicker(),t(".wf-tab-content").hide(),t(".wf-fancybox").fancybox(),t("#login").show(),t(".wf-tab-btn").on("click",function(e){e.preventDefault();var a=t(this).attr("data-tab");t(".wf-tab-content").hide(),t(".wf-tab-btn").removeClass("active"),t(this).addClass("active"),t("#"+a).show()}),t("#wf-application-form").on("submit",function(a){a.preventDefault();var n=t(this).serializeArray();if((t(".wf-error").text(""),WCAFFILIATE.enable_recaptcha)&&0==grecaptcha.getResponse().length)return alert(WCAFFILIATE.recaptcha_message),a.preventDefault(),!1;t.ajax({url:WCAFFILIATE.ajaxurl,type:"POST",data:n,dataType:"JSON",success:function(a){a.password&&t("#wf-pass-error").text(a.password),a.email&&t("#wf-email-error").text(a.email),a.user_name&&t("#wf-uname-error").text(a.user_name),a.verify&&(t("#wf-setting-notice").slideDown(),t("#wf-setting-notice").text(a.message)),a.status&&(e(a.message),setTimeout(function(){location.reload()},3e3))}})}),t(document).on("click","#wc-affiliate-export-report-btn",function(e){e.preventDefault();var a=t(this).data("params"),n=t(this).data("headings"),o=t(this).data("name");t.ajax({url:WCAFFILIATE.ajaxurl,data:{action:"wf-export-report",data:a,headings:n},type:"POST",dataType:"html",success:function(t){!function(t,e){var a=document.createElement("a");a.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),a.setAttribute("download",t),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a)}("wc-affiliate-"+o+"-report.csv",t)}})}),t(".wc-affiliate-sw-dashboard-new-page-name").hide(),t("#wf-enable-shortlink").change(function(e){this.checked?t(".wf-shortlink-inputs").slideDown():t(".wf-shortlink-inputs").slideUp()}).change(),t("#wf-url-generator").submit(function(a){a.preventDefault(),t(".wf-long-affiliate-url").hide(),t(".wf-short-affiliate-url").hide();var n=t(this).serialize();t.ajax({url:WCAFFILIATE.ajaxurl,data:n,type:"POST",dataType:"JSON",success:function(a){console.log(a),1==a.status?(t("#wf_long_url").val(a.affiliate_link),t(".wf-long-affiliate-url").show(),t("#wf-shortlinks-list").html(a.link_table),a.shortlink&&(t("#wf_short_url").val(a.shortlink),t(".wf-short-affiliate-url").show(),t("#wf-shortlink-error").html(""))):e(a.message,"danger")},error:function(t){}})}),t(".wf-remove-shortlink sapn").submit(function(e){e.preventDefault(),t(".wf-long-affiliate-url").hide(),t(".wf-short-affiliate-url").hide();var a=t(this).serialize();t.ajax({url:WCAFFILIATE.ajaxurl,data:a,type:"POST",dataType:"JSON",success:function(e){console.log(e),1==e.status?(t("#wf_long_url").val(e.affiliate_link),t(".wf-long-affiliate-url").show(),t("#wf-shortlinks-list").html(e.link_table),e.shortlink&&(t("#wf_short_url").val(e.shortlink),t(".wf-short-affiliate-url").show(),t("#wf-shortlink-error").html(""))):t("#wf-shortlink-error").text(e.message)},error:function(t){}})}),t(".wf-url-copy").length&&t(".wf-url-copy").click(function(e){e.preventDefault();var a=t(this).closest(".wf-urls");t("input",a).select();try{document.execCommand("copy")&&(t(".wf-url-copy").html('<i class="far fa-copy"></i>'),t(".wf-url-copy").removeClass("success"),t(this).html('<i class="fas fa-check"></i>'),t(this).addClass("success"))}catch(t){console.log("Oops, unable to copy!")}}),1!=WCAFFILIATE.has_pro&&(t(".wf-copy-banner-btn").click(function(e){e.preventDefault();var a=t(this).closest(".wf-banner-code-area");t(".wf-copy-banner-content",a).select();try{document.execCommand("copy")&&(t(".wf-copy-banner-btn").html('<i class="far fa-copy"></i>'),t(".wf-copy-banner-btn").removeClass("success"),t(this).html('<i class="fas fa-check"></i>'),t(this).addClass("success"))}catch(t){console.log("Oops, unable to copy!")}}),t(document).on("click",".wf-delete-shortlink span",function(e){e.preventDefault();var a=t(this).closest("tr");confirm("Are you sure to delete this ?")&&a.remove()})),t(document).on("click","#request_payout",function(e){e.preventDefault();var a=t(this).attr("data-uid");t.ajax({url:WCAFFILIATE.ajaxurl,type:"POST",data:{action:"wf-request-payout",_nonce:WCAFFILIATE._nonce,user_id:a},dataType:"JSON",success:function(t){console.log(t)}})}),t(document).on("click","#wf-setting-password-toggl",function(e){e.preventDefault(),t("#wf-setting-password-area").toggle()}),t(document).on("submit","#wf-user-settings",function(a){a.preventDefault();var n=t(this).serializeArray();t("#wf-upass-error").text(""),t.ajax({url:WCAFFILIATE.ajaxurl,type:"POST",data:n,dataType:"JSON",success:function(a){a.password&&t("#wf-upass-error").text(a.password),1==a.status&&e(a.message),console.log(a)}})}),t(document).on("click","#wf-upload-btn",function(e){e.preventDefault();var a=wp.media({title:"Upload Image",multiple:!1}).open().on("select",function(e){var n=a.state().get("selection").first().toJSON().url;t("#image_url").val(n),t("#wf-avatar img").attr("src",n),t(".wf-dashboard-profile-image img").attr("src",n)})}),t(document).on("click",".wf-request-payout",function(a){a.preventDefault(),t.ajax({url:WCAFFILIATE.ajaxurl,data:{action:"wf-request-payout",_nonce:WCAFFILIATE._nonce},type:"POST",dataType:"JSON",success:function(t){console.log(t),1==t.status?(e(t.message),setTimeout(function(){location.reload()},2500)):e(t.message,"danger")}})}),t(document).on("click",".wf-alert-dismiss, #wf-alert-overlay",function(e){t("#wf-alert-popup").hide(),t("#wf-alert-overlay").remove(),t("body").removeClass("wf-alert-container")}),t(document).on("change","#pay_with_credit",function(e){var a="no",n=t("#wf_cart_total").val();t(this).is(":checked")&&(a="yes"),t.ajax({type:"POST",url:WCAFFILIATE.ajaxurl,data:{action:"wf-pay-with-credit",pay_with_credit:a,cart_total:n},success:function(e){console.log(e),t("[name='update_cart']").prop("disabled",!1),t("[name='update_cart']").trigger("click")}})});var a=t("#wf-payout-method option:selected").val();t(".wf-setting-panel-content-"+a).show(),t(document).on("change","#wf-payout-method",function(){var e=t(this).val();t(".wf-setting-payout-method").slideUp(),t(".wf-setting-panel-content-"+e).slideDown()})});